
:root{--bg:#0b0f16;--fg:#eef3ff;--accent:#5af;--accent2:#f5a;--card:#121827;--soft:#1b2235;}
*{box-sizing:border-box} html,body{height:100%}
body{margin:0;background:var(--bg);color:var(--fg);font-family:system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, 'Helvetica Neue', Arial, 'Apple Color Emoji','Segoe UI Emoji', 'Segoe UI Symbol';}
.app{display:flex;min-height:100vh;flex-direction:column}
header.app-header{position:sticky;top:0;z-index:10;background:linear-gradient(180deg, rgba(12,18,30,.95), rgba(12,18,30,.85));border-bottom:1px solid #22324a;backdrop-filter: blur(8px);}
.brand{display:flex;align-items:center;gap:10px;padding:10px 14px}
.brand .logo{width:28px;height:28px}
.hud{display:flex;align-items:center;gap:10px;padding:8px 14px;border-top:1px solid #22324a}
.hud.small .xp-bar{width:160px;height:8px;background:#22324a;border-radius:8px;overflow:hidden}
.hud.small .xp-bar>div{height:100%;background:linear-gradient(90deg, #5af, #a5f);width:0%}
.topbar{display:flex;align-items:center;justify-content:space-between;}
.hamb{margin:0 12px;font-size:20px;background:transparent;border:1px solid #2d3d5f;color:#9ec; padding:6px 10px;border-radius:10px;cursor:pointer}
aside.menu{position:fixed;top:58px;right:12px;width:260px;max-height:70vh;overflow:auto;background:var(--card);border:1px solid #2b3a58;border-radius:14px;box-shadow:0 10px 24px rgba(0,0,0,.45);display:none;z-index:20}
aside.menu.open{display:block}
aside.menu .nav{display:grid;gap:4px;padding:10px}
aside.menu .nav button{background:#101827;border:1px solid #2b3a58;color:#cfe;padding:10px 12px;border-radius:10px;text-align:left;cursor:pointer}
main.view{padding:16px;max-width:1100px;margin:0 auto;width:100%}
.cardish{background:var(--card);border:1px solid #273755;border-radius:14px;padding:14px;margin:12px 0}
.dash{margin:0 0 10px 0}
.grid2{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:12px}
.row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
input,select,textarea,button{background:#0d1524;color:#e8f3ff;border:1px solid #2b3a58;border-radius:10px;padding:8px 10px}
button.primary{background:linear-gradient(180deg,#3aa0ff,#5a64ff);border:0}
button.danger{background:#a33}
.tile-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:10px}
.tile{border:1px solid #2b3a58;border-radius:12px;padding:14px;text-align:center;background:#0f1526;cursor:pointer}
.party-banner{display:flex;align-items:center;gap:10px;margin-bottom:10px}
.party-members img{height:64px;width:64px;border-radius:12px;object-fit:cover;border:1px solid #3a4f80}
.char-portrait img{max-width:320px;border-radius:14px;border:1px solid #3a4f80}
.badges{display:flex;gap:8px;flex-wrap:wrap}
.badge{padding:6px 10px;border:1px solid #446; border-radius:999px;background:#0f1a2a}
/* Overlays */
.sb-portrait-wrap{position:relative;display:inline-block}
.sb-acc-layer{position:absolute;inset:0;pointer-events:none}
.sb-acc-ov{filter: drop-shadow(0 2px 2px rgba(0,0,0,.35));}
/* Breathe */
.breathe-stage{display:flex;flex-direction:column;align-items:center;gap:10px;padding:20px 10px}
.b-circle{width:180px;height:180px;border-radius:50%;background:conic-gradient(#6cf, #f6a, #6cf);filter:contrast(1.2) saturate(1.2);display:grid;place-items:center;cursor:pointer}
.b-circle .inner{width:70%;height:70%;border-radius:50%;background:#0b0f16aa;border:2px dashed #6cf}
.phase{opacity:.85}
