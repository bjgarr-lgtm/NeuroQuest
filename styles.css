/* v2.5.1 — retro neon + pixel UI + de‑pixelated pet only */
:root{ --bg:#000; --surface:#0b0b0b; --muted:#151515; --text:#e6faff; --accent:#00eaff; --accent-2:#ff3ea5; --danger:#ff3860; }
*{ box-sizing:border-box; }
html,body{ height:100% }
body{ margin:0; background:var(--bg); color:var(--text); min-height:100vh; display:flex; flex-direction:column;
  font-family:'Press Start 2P', monospace; image-rendering: pixelated; }
body.smooth #petStage, .pet-stage svg{ image-rendering:auto }
.app-header{ position:sticky; top:0; z-index:10; padding:.4rem .6rem; border-bottom:1px solid rgba(255,255,255,.06);
  background:linear-gradient(0deg, rgba(0,0,0,.6), rgba(0,0,0,.2)); }
.brand{ display:flex; align-items:center; gap:.6rem } .logo{ width:28px; height:28px }
h1{ font-size:1.1rem; margin:0 }
.top-nav{ display:flex; gap:.25rem; flex-wrap:wrap; margin-top:.5rem; position:relative }
.nav-btn{ background:var(--surface); color:var(--text); border:1px solid rgba(255,255,255,.12); border-radius:999px; padding:.35rem .55rem; font-size:.9rem; cursor:pointer;
  transition: transform .12s ease, filter .2s ease }
.nav-btn:hover{ transform:translateY(-1px) scale(1.03) }
.nav-btn:active{ transform:translateY(0) scale(.97) }
.nav-btn.active{ filter: drop-shadow(0 0 8px color-mix(in oklab, var(--accent) 40%, transparent)); }
.nav-hi{ position:absolute; height:3px; bottom:-2px; left:0; width:56px; background:linear-gradient(90deg, var(--accent), var(--accent-2)); border-radius:999px;
  box-shadow:0 0 14px color-mix(in oklab, var(--accent) 60%, transparent); transition: transform .25s cubic-bezier(.2,.9,.2,1), width .25s ease; pointer-events:none }

.view{ padding:.9rem; display:grid; gap:.9rem; align-content:start }
.cardish{ background:var(--surface); border:2px solid rgba(255,255,255,.06); border-radius:12px; padding:.8rem }
button{ background:var(--accent); color:#0f0f0f; border:none; border-radius:.8rem; padding:.6rem .9rem; font-weight:800; cursor:pointer; box-shadow:0 6px 18px rgba(0,0,0,.25) }
button.small{ padding:.4rem .7rem; font-size:.8rem } .secondary{ background:var(--muted); color:var(--text) } .danger{ background:var(--danger); color:#0f0f0f }
input,textarea,select{ width:100%; background:var(--surface); color:var(--text); border:2px solid rgba(255,255,255,.08); border-radius:.6rem; padding:.6rem .7rem }
.field{ display:grid; gap:.3rem; margin:.5rem 0 } .field>span{ font-size:.8rem; opacity:.9 }
.app-footer{ margin-top:auto; display:flex; align-items:center; gap:.6rem; justify-content:center; padding:.7rem; color:rgba(255,255,255,.8);
  border-top:1px solid rgba(255,255,255,.06); background:linear-gradient(180deg, rgba(255,255,255,.00), rgba(255,255,255,.04)); }
.app-footer .dot{ opacity:.5 }

/* HUD */
.hud{ display:flex; gap:1rem; align-items:center; padding:.4rem .6rem .6rem }
.hud .hearts{ display:flex; gap:.35rem }
.heart{ width:22px; height:20px; display:inline-block; background: conic-gradient(from 45deg, #ff6584, #ff2d55);
  clip-path:path("M10,3 C10,1 12,0 13.5,1.5 C15,0 17,1 17,3 C17,6 13.5,8.5 13.5,8.5 L10,12 L6.5,8.5 C6.5,8.5 3,6 3,3 C3,1 5,0 6.5,1.5 C8,0 10,1 10,3 Z");
  filter: drop-shadow(0 0 6px rgba(255,46,115,.6)); }
.heart.off{ opacity:.25; filter:none }
.xp-wrap{ display:grid; gap:.25rem; min-width:220px } .xp-label{ display:flex; align-items:center; gap:.5rem; font-weight:800 }
.xp-bar{ width:100%; height:12px; border:2px solid rgba(255,255,255,.08); border-radius:999px; background:#0b0b0b; overflow:hidden }
.xp-bar>div{ height:100%; width:0%; background: linear-gradient(90deg, var(--accent), var(--accent-2)); transition: width .35s cubic-bezier(.2,.9,.2,1) }
.xp-bar.big{ height:16px }
.avatars{ display:flex; align-items:center; gap:.25rem } .avatar{ width:30px; height:30px; border-radius:8px; overflow:hidden; border:2px solid rgba(255,255,255,.16) }
.avatars img{ width:100%; height:100%; object-fit:cover }

/* Dashboard tiles */
.tile-grid{ display:grid; grid-template-columns:repeat(2,1fr); gap:.8rem }
@media(min-width:720px){ .tile-grid{ grid-template-columns:repeat(4,1fr) } }
.tile{ display:grid; place-items:center; gap:.4rem; padding:1rem; border:2px solid #5b3ca6; border-radius:12px; background:#120c1f; text-decoration:none; color:var(--text); cursor:pointer; position:relative; overflow:hidden }
.tile::after{ content:''; position:absolute; inset:auto 0 0 0; height:0; background:linear-gradient(90deg, var(--accent), var(--accent-2)); opacity:.2; transition:height .2s ease }
.tile:hover::after{ height:100% } .ico{ width:28px; height:28px }

/* Panels */
.quest-board{ display:grid; gap:1rem } .panels{ display:grid; gap:1rem } @media(min-width:700px){ .panels{ grid-template-columns: repeat(3,1fr) } }
.panel{ background:var(--surface); border-radius:16px; padding:.8rem; position:relative; border:2px solid rgba(255,255,255,.06) }
.panel-title{ font-weight:900; letter-spacing:.8px; margin-bottom:.5rem; text-transform:uppercase; text-shadow:0 0 8px color-mix(in oklab, var(--accent) 40%, transparent) }
.panel-list{ display:grid; gap:.5rem }
.quest-row{ display:flex; align-items:center; gap:.6rem; padding:.45rem .5rem; border:2px solid rgba(255,255,255,.08); border-radius:.6rem; background: rgba(255,255,255,.02) }
.quest-row.done{ opacity:.6; text-decoration:line-through }
.checkbox{ width:20px; height:20px; border:2px solid rgba(255,255,255,.18); border-radius:4px; display:grid; place-items:center; background:rgba(0,0,0,.25); cursor:pointer }
.checkbox.checked{ background:linear-gradient(180deg, #67ffb1, #00ffa7); border-color:#00ffa7; color:#052b22 }

/* Character/Companion cards */
.char-grid{ display:grid; gap:.8rem; grid-template-columns:repeat(auto-fit,minmax(140px,1fr)) }
.hero{ display:grid; place-items:center; gap:.4rem; padding:.6rem; border:2px solid rgba(255,255,255,.08); border-radius:12px; background:var(--surface); cursor:pointer }
.hero img{ width:100%; height:200px; object-fit:contain; animation: bob 3s ease-in-out infinite; filter: drop-shadow(0 0 8px rgba(0,0,0,.8)); }
.hero .name{ font-size:.8rem } @keyframes bob { 0%,100%{ transform: translateY(0)} 50%{ transform: translateY(-6px) } }

/* Pet stage — smooth only here */
.pet-stage{ display:grid; place-items:center; height:240px }
.pet-stage svg{ image-rendering:auto }

/* Store */
.store{ display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:.8rem; margin-top:1rem }
.store .card{ background:var(--surface); border:2px solid rgba(255,255,255,.08); border-radius:12px; padding:.6rem; display:grid; gap:.4rem }
.store .meta{ display:flex; align-items:center; justify-content:space-between }

/* Cursor trail */
.cursor-dot{ position:fixed; width:6px; height:6px; border-radius:50%; background:var(--accent); pointer-events:none; mix-blend-mode:screen; opacity:.7; filter:blur(0.3px) }

/* Party banner */
.party{ display:flex; gap:12px; align-items:flex-end; justify-content:center; overflow:hidden }
.party .card{ display:grid; place-items:center; gap:.25rem }
.party img{ width:96px; height:96px; object-fit:contain; animation:bob 3s ease-in-out infinite }
.party .pet-wrap svg{ width:96px; height:96px; animation:bob 3.4s ease-in-out -.4s infinite }

/* Crown drop & screen shake */
.drop-crown{ position:fixed; left:50%; top:-50px; transform:translateX(-50%); width:60px; height:40px; background:radial-gradient(circle,#ffd86b,#eaa326); clip-path:polygon(0 100%,10% 40%,20 100%,35 40%,50 100%,65 40%,80 100%,90 40%,100 100%); border:3px solid #9c6a00; border-radius:6px; z-index:70; animation:crownFall .9s cubic-bezier(.2,.9,.2,1) forwards }
@keyframes crownFall{ 0%{ top:-60px; transform:translateX(-50%) rotate(-12deg) } 80%{ top:120px } 100%{ top:110px; transform:translateX(-50%) rotate(0) } }
.shake{ animation:shake .5s cubic-bezier(.36,.07,.19,.97) both }
@keyframes shake{ 10%,90%{ transform:translate3d(-1px,0,0) } 20%,80%{ transform:translate3d(2px,0,0) } 30%,50%,70%{ transform:translate3d(-4px,0,0) } 40%,60%{ transform:translate3d(4px,0,0) } }

/* Nav polish */
.nav-btn{ background:linear-gradient(180deg,#121212,#0a0a0a); box-shadow: inset 0 0 0 1px rgba(255,255,255,.04) }
.nav-btn:hover{ box-shadow:0 0 12px color-mix(in oklab, var(--accent) 35%, transparent) }
