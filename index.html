<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>SootheBirb — v2.5.0+ (Toddler/Party/Equip)</title>
  <link rel="icon" href="assets/icon.svg" type="image/svg+xml"/>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css"/>
</head>
<body class="pixel crt">
  <header class="app-header">
    <div class="brand">
      <img class="logo" src="assets/icon.svg" alt=""/>
      <h1>SootheBirb</h1>
      <button id="musicBtn" class="music-toggle" title="Music">♪</button>
    </div>

    <nav class="top-nav" aria-label="Primary">
      <div id="navHi" class="nav-hi"></div>
      <button class="nav-btn" data-route="home">Dashboard</button>
      <button class="nav-btn" data-route="tasks">Quests</button>
      <button class="nav-btn" data-route="clean">Cleaning</button>
      <button class="nav-btn" data-route="coop">Co-Op</button>
      <button class="nav-btn" data-route="budget">Budget</button>
      <button class="nav-btn" data-route="meals">Meals</button>
      <button class="nav-btn" data-route="calendar">Calendar</button>
      <button class="nav-btn" data-route="shop">Shop</button>
      <button class="nav-btn" data-route="characters">Character</button>
      <button class="nav-btn" data-route="companion">Companion Select</button>
      <button class="nav-btn toddlerOnly" data-route="minigames">Mini-Games</button>
      <button class="nav-btn" data-route="breathe">Breathe</button>
      <button class="nav-btn" data-route="journal">Journal</button>
      <button class="nav-btn" data-route="checkin">Check-In</button>
      <button class="nav-btn" data-route="rewards">Rewards</button>
      <button class="nav-btn" data-route="settings">Settings</button>
    </nav>

    <!-- HUD -->
    <div class="hud">
      <div class="avatars" id="hudAvatars"></div>
      <div class="hearts" id="hudHearts"></div>
      <div class="gold" id="hudGold">🪙 0</div>
      <div class="xp-wrap">
        <div class="xp-label"><span id="hudLevel">Lv 1</span><span class="flame">🔥</span></div>
        <div class="xp-bar"><div id="hudXp"></div></div>
      </div>

      <!-- Toddler toggle -->
      <div class="toddler-toggle">
        <label class="switch">
          <input id="toddlerToggle" type="checkbox"><span></span>
        </label>
        <div class="toggle-label">Toddler</div>
      </div>
    </div>
  </header>

  <main id="view" class="view"></main>
  <div id="fxLayer" class="fx-layer" aria-hidden="true"></div>

  <footer class="app-footer">
    <span id="streakLabel">Streak: 0 🔥 | Best: 0</span>
    <span class="dot">•</span>
    <button id="exportBtn" class="secondary">Export</button>
    <input id="importFile" type="file" accept="application/json" style="display:none"/>
    <button id="importBtn" class="secondary">Import</button>
  </footer>

  <!-- DASH -->
  <template id="tpl-home">
    <section class="dash-board">
      <div class="mode-banner toddlerOnly">🍼 Toddler Mode ON — mini-games and kid-quests enabled</div>

      <!-- Party banner (character + companions; pet only in toddler) -->
      <div id="partyBanner" class="party cardish"></div>

      <div class="tile-grid">
        <a class="tile" data-route="tasks"><img class="ico" src="assets/icons/planner.svg" alt=""><div class="tile-label">Daily Planner</div></a>
        <a class="tile" data-route="rewards"><img class="ico" src="assets/icons/trophy.svg" alt=""><div class="tile-label">Rewards</div></a>
        <a class="tile" data-route="clean"><img class="ico" src="assets/icons/broom.svg" alt=""><div class="tile-label">Cleaning</div></a>
        <a class="tile" data-route="coop"><img class="ico" src="assets/icons/buddy.svg" alt=""><div class="tile-label">Co-Op</div></a>
        <a class="tile" data-route="calendar"><img class="ico" src="assets/icons/calendar.svg" alt=""><div class="tile-label">Calendar</div></a>
        <a class="tile" data-route="shop"><img class="ico" src="assets/icons/cart.svg" alt=""><div class="tile-label">Shop</div></a>
        <a class="tile" data-route="budget"><img class="ico" src="assets/icons/coin.svg" alt=""><div class="tile-label">Budget</div></a>
        <a class="tile" data-route="meals"><img class="ico" src="assets/icons/meal.svg" alt=""><div class="tile-label">Meals</div></a>
        <a class="tile" data-route="characters"><img class="ico" src="assets/icons/hero.svg" alt=""><div class="tile-label">Character</div></a>
        <a class="tile" data-route="companion"><img class="ico" src="assets/icons/buddy.svg" alt=""><div class="tile-label">Companion</div></a>
        <a class="tile toddlerOnly" data-route="minigames"><img class="ico" src="assets/icons/trophy.svg" alt=""><div class="tile-label">Mini-Games</div></a>
      </div>
    </section>
  </template>

  <!-- TASKS / QUESTS -->
  <template id="tpl-tasks">
    <section class="cardish">
      <h2 class="dash">Daily Quests</h2>
      <p class="sub" id="tasksHint"></p>
      <div id="questList" class="panel-list"></div>
      <div class="row"><button id="regenQuests" class="secondary">Regenerate for Today</button><button id="addQuest" class="secondary">Add Quest</button></div>
    </section>
  </template>

  <!-- CLEANING -->
  <template id="tpl-clean"><section class="cardish"><h2 class="dash">Cleaning Dungeon</h2><p class="sub">Small quests + Weekly boss.</p></section></template>

  <!-- CO-OP -->
  <template id="tpl-coop"><section class="cardish"><h2 class="dash">Co-Op</h2><p class="sub">Play together mode.</p></section></template>

  <!-- BUDGET -->
  <template id="tpl-budget"><section class="cardish"><h2 class="dash">Budget Tracker</h2><p class="sub">Simple stub page.</p></section></template>

  <!-- MEALS -->
  <template id="tpl-meals"><section class="cardish"><h2 class="dash">Meal Planner</h2><p class="sub">Simple stub page.</p></section></template>

  <!-- CALENDAR -->
  <template id="tpl-calendar"><section class="cardish"><h2 class="dash">Calendar</h2><p class="sub toddlerOnly">🍼 Toddler markers shown for today.</p><p class="sub">Stub calendar.</p></section></template>

  <!-- SHOP -->
  <template id="tpl-shop">
    <section class="cardish">
      <h2 class="dash">Shop (Character Cosmetics)</h2>
      <div class="row">
        <button class="secondary buy" data-item="crown">Buy Crown — 30🪙</button>
        <button class="secondary buy" data-item="glasses">Neon Glasses — 12🪙</button>
        <button class="secondary buy" data-item="cape">Mage Cape — 24🪙</button>
        <button class="secondary buy" data-item="torch">Torch — 10🪙</button>
      </div>
      <div class="row"><em>Equip them on the Character page.</em></div>
    </section>
  </template>

  <!-- REWARDS -->
  <template id="tpl-rewards"><section class="cardish"><h2 class="dash">Rewards</h2><p class="sub">Achievements and badges.</p></section></template>

  <!-- CHECK-IN -->
  <template id="tpl-checkin"><section class="cardish"><h2 class="dash">Check-In</h2><p class="sub">Mood slider and notes.</p></section></template>

  <!-- JOURNAL -->
  <template id="tpl-journal"><section class="cardish"><h2 class="dash">Journal</h2><p class="sub">Write it out.</p></section></template>

  <!-- BREATHE -->
  <template id="tpl-breathe"><section class="cardish"><h2 class="dash">Breathe</h2><p class="sub">Guided breathing.</p></section></template>

  <!-- MINI-GAMES (Toddler only) -->
  <template id="tpl-minigames">
    <section class="cardish">
      <h2 class="dash">Mini-Games</h2>
      <p class="sub">Toddler taps the bubbles. Pop 20 for 💰 + XP!</p>
      <canvas id="popGame" width="600" height="320" class="game"></canvas>
    </section>
  </template>

  <!-- CHARACTER -->
  <template id="tpl-characters">
    <section class="cardish">
      <h2 class="dash">Your Character</h2>
      <div class="char-flex">
        <div id="charPreview" class="card preview"></div>
        <div class="controls">
          <h3>Pick Portrait</h3>
          <div class="char-grid" id="charGrid"></div>
          <div class="row">
            <button id="uploadChar" class="secondary">Upload portrait</button>
            <input id="charFile" type="file" accept="image/*" style="display:none"/>
          </div>

          <h3>Layered Rig</h3>
          <label><input type="checkbox" id="charRigEnable"/> Use Layered Rig</label>
          <div id="charRigForm" class="rig-form">
            <div class="row"><span>Body</span><input id="charRigBody" type="file" accept="image/*"></div>
            <div class="row"><span>Head</span><input id="charRigHead" type="file" accept="image/*"></div>
            <div class="row"><span>Left Arm</span><input id="charRigLArm" type="file" accept="image/*"></div>
            <div class="row"><span>Right Arm</span><input id="charRigRArm" type="file" accept="image/*"></div>
            <div class="row"><span>Prop (optional)</span><input id="charRigProp" type="file" accept="image/*"></div>
            <button id="charRigSave" class="primary small">Save Rig</button>
          </div>

          <h3>Animation</h3>
          <select id="charAnim">
            <option value="walk">Walk</option>
            <option value="wave">Wave</option>
            <option value="dance">Dance</option>
            <option value="idle">Bob (idle)</option>
          </select>

          <h3>Equip</h3>
          <div class="equip-grid">
            <button class="equip" data-slot="head" data-item="crown">Crown</button>
            <button class="equip" data-slot="face" data-item="glasses">Neon Glasses</button>
            <button class="equip" data-slot="back" data-item="cape">Cape</button>
            <button class="equip" data-slot="hand" data-item="torch">Torch</button>
            <button class="unequip secondary">Unequip All</button>
          </div>
        </div>
      </div>
    </section>
  </template>

  <!-- COMPANION -->
  <template id="tpl-companion">
    <section class="cardish">
      <h2 class="dash">Companion Party</h2>
      <p class="sub">Pick who’s with you today. Quests adapt to the party.</p>
      <div class="party-pick" id="partyPick"></div>
      <div class="row"><button id="saveParty" class="primary small">Save Today’s Party</button></div>
    </section>
  </template>

  <script type="module" src="app.js"></script>
</body>
</html>
